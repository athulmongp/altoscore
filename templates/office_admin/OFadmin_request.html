{% extends 'office_admin/OFadmin_Base.html'%}
{% load static %}
{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <style>
    /* Style the container */
    .autocomplete {
      position: relative;
      
    }

    /* Style the input box */
    .autocomplete input[type="text"] {
     
      padding: 10px;
      
      border-radius: 4px;
      font-size: 14px
    }

    /* Style the dropdown list */
    .autocomplete .autocomplete-items {
      position: absolute;
     
      border-radius: 4px;
      z-index: 99;
      width: 100%;
      max-height: 150px;
      overflow-y: auto;
      background-color: #1f1e1e;
    }

    /* Style each suggestion item */
    .autocomplete .autocomplete-items div {
      padding: 10px;
      cursor: pointer;
      color: rgb(224, 221, 221);
      font-size: 14px;
    }

    /* Highlight the selected suggestion item */
    .autocomplete .autocomplete-items div:hover {
      background-color: #5f5c5c;
      color: rgb(238, 236, 236);
    }
  </style>

<style>
    .categoryBox
    {
        display: flex;
        align-items: flex-start;
       justify-content: flex-start;
       flex-direction: column;
        gap: 1rem;
        margin-bottom: 2rem;
        margin-top: 1rem;
      
    }
    .categoryBox span{
        font-size: 14px;
    
    }
    .certificate, label
    {
        font-size: 16px;
        letter-spacing: 0.06rem;
        margin-bottom: 2rem;
        color: rgb(212, 209, 209);
        font-weight: 600;
        margin-top: 2rem;
        border-bottom: 3px solid rgb(228, 214, 10);
        padding-bottom: 0.60rem;
    }
   
    .categoryBox span .c_text{
        padding-left: 0.60rem;
    }
</style>

<div class="row">
    <div class="col-sm-4 grid-margin">
        <div class="card">
            <a data-bs-toggle="modal" data-bs-target="#request-form" style="text-decoration: none; color: white;">
                <div class="card-body">
                    <h5>REQUEST FORM</h5>
                    <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                            <div class="d-flex d-sm-block d-md-flex align-items-center">
                                <h2 class="mb-0">{{ reg_count }}</h2>
                                <!-- <p class="text-success ms-2 mb-0 font-weight-medium">+3.5%</p> -->
                            </div>
                            <!-- <h6 class="text-muted font-weight-normal">11.38% Since last month</h6> -->
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                            <i class="icon-lg mdi mdi-clipboard-text text-primary ms-auto"></i>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-sm-4 grid-margin">
        <div class="card">
            <a href="{% url 'BRadmin_dept'  %}" style="text-decoration: none; color: white;">
                <div class="card-body">
                    <h5>INTERNSHIP</h5>
                    <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                            <div class="d-flex d-sm-block d-md-flex align-items-center">
                                <h2 class="mb-0">{{ leads_count }}</h2>
                            </div>
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                            <i class="icon-lg mdi mdi-clipboard-account text-info ms-auto"></i>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-sm-4 grid-margin">
        <div class="card">
            <a href="{% url 'ofadmin_requestView'  %}" style="text-decoration: none; color: white;">
                <div class="card-body">
                    <h5>REQUEST VIEW</h5>
                    <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                            <div class="d-flex d-sm-block d-md-flex align-items-center">
                                <h2 class="mb-0">{{ leads_count }}</h2>
                            </div>
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                            <i class="icon-lg mdi mdi-clipboard-check text-success ms-auto"></i>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>
   
   
    
</div>


  <!-- REQUEST FORM Modal -->
  <div class="modal fade" id="request-form" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="card" style="border: none;">
            <div class="modal-header" style="border: none;"> 
                <button type="button" class="btn-close btn-outline-danger" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">

                <form action="{% url 'ofadmin_request_formSubmit' %}" method="post" class="text-center p-3">
                  {% csrf_token %}
                  <h4 class="modal-title" id="exampleModalLabel">Request Form</h4>
                  
                    <div class="inputBox text-start mt-2">
                        <label>Choose Employee</label>
                        <div class="autocomplete">
                            <!-- The input box -->
                            <input type="text" id="nameInput" name="nameInput" class="form-control" placeholder="Employee name" required>
                            <input type="hidden" id="nameInputId" name="nameInputId" class="form-control" required>
                            
                            <!-- The dropdown list to show suggestions -->
                            <div class="autocomplete-items " id="nameList">
                             
                            </div>
                          </div>
                        
                    </div>
                   
                    <P class="text-start certificate">Certificates</P>
                   
                    <div class="categoryBox">
                       
                        <span><input type="checkbox" name="certficate_select" value="Offer Letter"><span class="c_text">Offer Letter</span></span>
                        <span><input type="checkbox" name="certficate_select" value="Experience Certificate"><span class="c_text">Experience Certificate</span></span>
                        <span><input type="checkbox" name="certficate_select" value="Relieve Letter"><span class="c_text">Relieve Letter</span></span>
                        <span><input type="checkbox" name="certficate_select" value="Authorization Letter"><span class="c_text">Authorization Letter</span></span>
                    </div>
                 
                  <button type="submit" class="btn btn-outline-success">Request For Approve</button>
                  <!-- <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">Close</button> -->
                </form>
              </div>

        </div>
      </div>
    </div>
  </div>

  



<!--  Name Filter for request form -->

<script>
    // Sample data for demonstration purposes
    const namesFromModel = [
      {% for user in mem3 %}
        { "id": {{ user.id }}, "fullname": "{{ user.fullname }}" }
        {% if not forloop.last %},{% endif %}
      {% endfor %}
    ];
  
    // Function to handle input and show suggestions
    function handleInput() {
      const input = document.getElementById("nameInput").value.toLowerCase();
      const nameList = document.getElementById("nameList");
  
      // Clear previous suggestions
      nameList.innerHTML = "";
  
      // Show matching suggestions
      namesFromModel.forEach(item => {
        const name = item.fullname;
        if (name.toLowerCase().includes(input)) {
          const suggestion = document.createElement("div");
          suggestion.textContent = name;
          suggestion.addEventListener("click", () => selectName(item));
          nameList.appendChild(suggestion);
        }
      });
    }
  
    // Function to handle name selection
    function selectName(selectedItem) {
      const nameInput = document.getElementById("nameInput");
      const nameInputId = document.getElementById("nameInputId");
      nameInput.value = selectedItem.fullname;
      nameInputId.value = selectedItem.id;
      // Clear suggestions after selecting a name (optional)
      document.getElementById("nameList").innerHTML = "";
    }
  
    // Attach the handleInput function to the input event
    document.getElementById("nameInput").addEventListener("input", handleInput);
  </script>
  
{% endblock %}